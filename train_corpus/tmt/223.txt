一种集群文件系统及其文件锁分配方法 本发明公开了一种集群文件系统及其文件锁分配方法，包括：代理模块从文件锁模块获取对于一个文件的文件锁并接收来自多个业务客户端对该文件的多个第一加锁请求；将所述多个第一加锁请求依时序建立等待队列，按所述等待队列顺序依次响应所述多个第一加锁请求，将所述文件锁分配给相应的业务客户端持有；当所有业务客户端均不再持有所述文件锁且所述等待队列为空并在后续的预设时长内没有接收到新的第一加锁请求时，将所述文件锁释放；在代理模块未持有文件锁的状态下，文件锁模块接收来自修复客户端的第二加锁请求，并将文件锁分配给修复客户端持有；本发明使数据修复时不影响前端业务，保证前端业务性能，充分复用利用硬件资源，降低用户成本。
