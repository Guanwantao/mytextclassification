一种 集群 文件系统 及其 文件 锁 分配 方法 本发明 公开 了 一种 集群 文件系统 及其 文件 锁 分配 方法 ， 包括 ： 代理 模块 从文件 锁 模块 获取 对于 一个 文件 的 文件 锁 并 接收 来自 多个 业务 客户端 对 该 文件 的 多个 第一 加锁 请求 ； 将 所述 多个 第一 加锁 请求 依 时序 建立 等待 队列 ， 按 所述 等待 队列 顺序 依次 响应 所述 多个 第一 加锁 请求 ， 将 所述 文件 锁 分配 给 相应 的 业务 客户端 持有 ； 当 所有 业务 客户端 均 不再 持有 所述 文件 锁且 所述 等待 队 列为 空 并 在 后续 的 预设 时长 内 没有 接收 到 新 的 第一 加锁 请求 时 ， 将 所述 文件 锁 释放 ； 在 代理 模块 未 持有 文件 锁 的 状态 下 ， 文件 锁 模块 接收 来自 修复 客户端 的 第二 加锁 请求 ， 并 将 文件 锁 分配 给 修复 客户端 持有 ； 本发明 使 数据 修复 时 不 影响 前端 业务 ， 保证 前端 业务 性能 ， 充分 复用 利用 硬件资源 ， 降低 用户 成本 。 
